%%%% NeurIPS 2025 Style File
%%%% Based on the NeurIPS conference format
%%%% This is a simplified version for competition technical reports

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{neurips_2025}[2025/01/01 NeurIPS 2025 submission/camera-ready style file]

% Declare options
\newif\if@neuripsfinal\@neuripsfinalfalse
\DeclareOption{final}{\@neuripsfinaltrue}
\DeclareOption{preprint}{\@neuripsfinaltrue}
\ProcessOptions\relax

% Fonts and typography
\RequirePackage{times}

% Page layout
\RequirePackage[verbose=true,letterpaper]{geometry}
\AtBeginDocument{
  \newgeometry{
    textheight=9in,
    textwidth=5.5in,
    top=1in,
    headheight=12pt,
    headsep=25pt,
    footskip=30pt
  }
  \@ifpackageloaded{fullpage}
    {\PackageWarning{neurips_2025}{fullpage package not allowed! Overriding.}}
    {}
}

% Set line spacing
\renewcommand{\baselinestretch}{1.0}

% Paragraph formatting
\setlength{\parindent}{0.2in}
\setlength{\parskip}{0pt}

% Section formatting
\RequirePackage{titlesec}
\titleformat{\section}{\normalfont\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1em}

% Title and author formatting
\RequirePackage{authblk}

% Modify \@maketitle to customize title appearance
\renewcommand{\maketitle}{
  \par
  \begingroup
    \renewcommand{\thefootnote}{\fnsymbol{footnote}}
    \def\@makefnmark{\hbox to\z@{$\m@th^{\@thefnmark}$\hss}}
    \long\def\@makefntext##1{\parindent 1em\noindent
            \hbox to1.8em{\hss$\m@th^{\@thefnmark}$}##1}
    \@maketitle
    \thispagestyle{empty}
    \@thanks
  \endgroup
  \setcounter{footnote}{0}
  \let\maketitle\relax
  \let\@maketitle\relax
  \gdef\@thanks{}
  \gdef\@author{}
  \gdef\@title{}
  \let\thanks\relax
}

\def\@maketitle{
  \vskip 0.2in
  \begin{center}
    {\LARGE\bfseries\@title\par}
    \vskip 0.3in
    {\large\@author\par}
  \end{center}
  \vskip 0.3in
}

% Abstract formatting
\renewenvironment{abstract}
{
  \centerline{\large\bfseries Abstract}
  \vspace{0.5ex}
  \begin{quote}
}
{
  \end{quote}
}

% Line numbers for submission (if not final)
\if@neuripsfinal
  % Final version - no line numbers
\else
  \RequirePackage{lineno}
  \linenumbers
  \renewcommand\linenumberfont{\normalfont\tiny\sffamily\color{gray}}
\fi

% Header/Footer
\if@neuripsfinal
  % Final version - minimal header
  \RequirePackage{fancyhdr}
  \pagestyle{fancy}
  \fancyhf{}
  % \fancyhead[L]{\small NeurIPS 2025 Competition Track}
  % \fancyhead[R]{\small Embodied Agent Interface Challenge}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
\else
  % Submission version - include line numbers note
  \RequirePackage{fancyhdr}
  \pagestyle{fancy}
  \fancyhf{}
  \fancyhead[L]{\small NeurIPS 2025 Submission}
  \fancyhead[R]{\small EAI Challenge Technical Report}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
\fi

% Hyperlinks
\RequirePackage{xcolor}
\definecolor{neuripsblue}{RGB}{0,0,139}
\definecolor{neuripsdarkblue}{RGB}{0,0,100}

\if@neuripsfinal
  \RequirePackage{hyperref}
  \hypersetup{
    colorlinks=true,
    linkcolor=neuripsblue,
    citecolor=neuripsblue,
    urlcolor=neuripsblue,
    breaklinks=true
  }
\else
  \RequirePackage{hyperref}
  \hypersetup{
    colorlinks=true,
    linkcolor=neuripsblue,
    citecolor=neuripsblue,
    urlcolor=neuripsblue,
    breaklinks=true
  }
\fi

% Figure and table captions
\RequirePackage[font=small,labelfont=bf]{caption}

% Mathematics
\RequirePackage{amsmath,amsthm,amssymb}

% Lists
\RequirePackage{enumitem}
\setlist{nosep}
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{leftmargin=*}

\endinput
